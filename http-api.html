<!DOCTYPE html>
<html lang="en">
        <head>
        <meta charset="utf-8">
        <title>IndraDB / http api</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="lib/skeleton-2.0.4/css/normalize.css">
        <link rel="stylesheet" href="lib/skeleton-2.0.4/css/skeleton.css">
        <link rel="stylesheet" href="css/site.css">
    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="column" style="margin-top: 50px">
                    <img src="logo-mini.png" alt="" width="50" height="50" style="float: left" />
                    <h1 style="position: relative; left: 10px; top: 5px;">
                        <a href="index.html">IndraDB</a> / http api
                    </h1>

                    <h2><a id="http-status-messages"></a>HTTP status messages</h2>
                    <p>The HTTP API uses these return status codes:</p>
                    <ul>
                        <li><code>200</code> - If the request went through fine.</li>
                        <li>
                            <code>404</code> - If the endpoint was not found. Note that, due to a current shortcoming
                            in the routing library, this is used in place <code>405</code> as well.
                        </li>
                        <li><code>500</code> - When a server error occurs.</li>
                    </ul>

                    <h2><a id="http-endpoints"></a>Endpoints</h2>

                    <div class="card">
                        <p><code>POST /script/:filename</code>: Runs a script with the given filename.</p>
                        <p>URL parameters:</p>
                        <ul>
                        <li><code>filename</code> - The lua script to run.</li>
                        </ul>
                        <p>The request body can be JSON. When it is, it is passed to the script as <code>arg</code>.</p>
                        <p>Returns the value returned by the script, serialized to JSON.</p>
                    </div>

                    <div class="card">
                        <p><code>POST /mapreduce/:filename</code>: Runs a mapreduce script.</p>
                        <p>URL parameters:</p>
                        <ul>
                        <li><code>filename</code> - The lua script to run.</li>
                        </ul>
                        <p>The request body can be JSON. When it is, it is passed to the script as <code>arg</code>.</p>
                        <p>Returns the final reduced value, serialized to JSON.</p>
                    </div>
                    
                    <div class="card">
                        <p><code>POST /transaction</code>: Executes several requests in a single transaction.</p>
                        <p>
                            The request body must be a JSON array of requests. Each request is an object that includes
                            an <code>action</code> argument specifying what method to run, along with arguments
                            associated with the method.
                        </p>
                        <p>Returns a JSON array of responses.</p>
                        <p>The transaction requests and responses:</p>

                        <div class="card">
                            <p><code>create_vertex</code> - Creates a new vertex.</p>

                            <p>Arguments:</p>
                            <ul>
                                <li>
                                    <code>vertex</code> - A JSON object specifying the vertex. It should have a
                                    <code>type</code> property - specifying the vertex type - and an
                                    <code>id</code> property - specifying the vertex' UUID.
                                </li>
                            </ul>

                            <p>Returns the new vertex UUID.</p>
                        </div>

                        <div class="card">
                            <p>
                                <code>create_vertex_from_type</code> - Creates a new vertex from a given type. Used as
                                opposed to <code>create_vertex</code> when you do not want to manually specify the new
                                vertex's UUID.
                            </p>

                            <p>Arguments:</p>
                            <ul>
                                <li>
                                    <code>type</code> - The vertex type. Must be less than 256 characters long, and can
                                    only contain letters, numbers, dashes, and underscores.
                                </li>
                            </ul>

                            <p>Returns the new vertex UUID.</p>
                        </div>

                        <div class="card">
                            <p><code>get_vertices</code> - Gets vertices by a given query.</p>

                            <p>Arguments:</p>
                            <ul>
                                <li>
                                    <code>query</code> - The <a href="concepts.html#vertex-queries">vertex query</a> to
                                    use.
                                </li>
                            </ul>

                            <p>Returns the a list of the vertices matching the query.</p>
                        </div>

                        <div class="card">
                            <p><code>delete_vertices</code> - Deletes vertices by a given query.</p>

                            <p>Arguments:</p>
                            <ul>
                                <li>
                                    <code>query</code> - The <a href="concepts.html#vertex-queries">vertex query</a> to
                                    use.
                                </li>
                            </ul>

                            <p>Returns nothing.</p>
                        </div>

                        <div class="card">
                            <p><code>create_edge</code> - Creates a new edge.</p>

                            <p>Arguments:</p>
                            <ul>
                                <li>
                                    <code>key</code> - The <a href="concepts.html#edge-keys">edge key</a> that identifies
                                    the edge.
                                </li>
                                <li>
                                    <code>weight</code> - The weight to set the edge to; it must be between -1.0 and 1.0.
                                </li>
                            </ul>

                            <p>Returns nothing.</p>
                        </div>

                        <div class="card">
                            <p><code>get_edges</code> - Gets edges by a given query.</p>

                            <p>Arguments:</p>
                            <ul>
                                <li>
                                    <code>query</code> - The <a href="concepts.html#edge-queries">edge query</a> to
                                    use.
                                </li>
                            </ul>

                            <p>Returns a list of the edges matching the query.</p>
                        </div>

                        <div class="card">
                            <p><code>delete_edges</code> - Deletes edges by a given query.</p>

                            <p>Arguments:</p>
                            <ul>
                                <li>
                                    <code>query</code> - The <a href="concepts.html#edge-queries">edge query</a> to
                                    use.
                                </li>
                            </ul>

                            <p>Returns nothing.</p>
                        </div>

                        <div class="card">
                            <p><code>get_edge_count</code> - Gets the number of edges that match a given query.</p>

                            <p>Arguments:</p>
                            <ul>
                                <li>
                                    <code>id</code> - The vertex ID to get the edge count on.
                                </li>
                                <li>
                                    <code>type_filter</code> - What edge types to count, or <code>null</code> for all edge types.
                                </li>
                                <li>
                                    <code>direction</code> - <code>outbound</code> to count outbound edges, or <code>inbound</code> to count inbound edges.
                                </li>
                            </ul>

                            <p>Returns the number of edges that match the query.</p>
                        </div>

                        <div class="card">
                            <p><code>get_global_metadata</code> - Gets a global metadata value.</p>

                            <p>Arguments:</p>
                            <ul>
                                <li>
                                    <code>name</code> - The name of the value to get.
                                </li>
                            </ul>

                            <p>Returns the metadata value as JSON.</p>
                        </div>

                        <div class="card">
                            <p><code>set_global_metadata</code> - Sets a global metadata value.</p>

                            <p>Arguments:</p>
                            <ul>
                                <li>
                                    <code>name</code> - The name of the value to set.
                                </li>
                                <li>
                                    <code>value</code> - The new value as JSON.
                                </li>
                            </ul>

                            <p>Returns nothing.</p>
                        </div>

                        <div class="card">
                            <p><code>delete_global_metadata</code> - Deletes a global metadata value.</p>

                            <p>Arguments:</p>
                            <ul>
                                <li>
                                    <code>name</code> - The name of the value to delete.
                                </li>
                            </ul>

                            <p>Returns nothing.</p>
                        </div>

                        <div class="card">
                            <p><code>get_vertex_metadata</code> - Gets vertex metadata values.</p>

                            <p>Arguments:</p>
                            <ul>
                                <li>
                                    <code>query</code> - The <a href="concepts.html#vertex-queries">vertex query</a> to
                                    use.
                                </li>
                                <li>
                                    <code>name</code> - The name of the metadata to get.
                                </li>
                            </ul>

                            <p>
                                Returns a list of objects, each of which contains the vertex <code>id</code> and
                                metadata <code>value</code>.
                            </p>
                        </div>

                        <div class="card">
                            <p><code>set_vertex_metadata</code> - Sets vertex metadata values.</p>

                            <p>Arguments:</p>
                            <ul>
                                <li>
                                    <code>query</code> - The <a href="concepts.html#vertex-queries">vertex query</a> to
                                    use.
                                </li>
                                <li>
                                    <code>name</code> - The name of the metadata to set.
                                </li>
                                <li>
                                    <code>value</code> - The new value as JSON.
                                </li>
                            </ul>

                            <p>Returns nothing.</p>
                        </div>

                        <div class="card">
                            <p><code>delete_vertex_metadata</code> - Deletes vertex metadata.</p>

                            <p>Arguments:</p>
                            <ul>
                                <li>
                                    <code>query</code> - The <a href="concepts.html#vertex-queries">vertex query</a> to
                                    use.
                                </li>
                                <li>
                                    <code>name</code> - The name of the value to delete.
                                </li>
                            </ul>

                            <p>Returns nothing.</p>
                        </div>

                        <div class="card">
                            <p><code>get_edge_metadata</code> - Gets edge metadata values.</p>

                            <p>Arguments:</p>
                            <ul>
                                <li>
                                    <code>query</code> - The <a href="concepts.html#edge-queries">edge query</a> to
                                    use.
                                </li>
                                <li>
                                    <code>name</code> - The name of the metadata to get.
                                </li>
                            </ul>

                            <p>
                                Returns a list of objects, each of which contains the edge <code>key</code> and
                                metadata <code>value</code>.
                            </p>
                        </div>

                        <div class="card">
                            <p><code>set_edge_metadata</code> - Sets edge metadata values.</p>

                            <p>Arguments:</p>
                            <ul>
                                <li>
                                    <code>query</code> - The <a href="concepts.html#edge-queries">edge query</a> to
                                    use.
                                </li>
                                <li>
                                    <code>name</code> - The name of the metadata to set.
                                </li>
                                <li>
                                    <code>value</code> - The new value as JSON.
                                </li>
                            </ul>

                            <p>Returns nothing.</p>
                        </div>

                        <div class="card">
                            <p><code>delete_edge_metadata</code> - Deletes edge metadata.</p>

                            <p>Arguments:</p>
                            <ul>
                                <li>
                                    <code>query</code> - The <a href="concepts.html#edge-queries">edge query</a> to
                                    use.
                                </li>
                                <li>
                                    <code>name</code> - The name of the value to delete.
                                </li>
                            </ul>

                            <p>Returns nothing.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
